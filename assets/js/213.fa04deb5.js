(window.webpackJsonp=window.webpackJsonp||[]).push([[213],{502:function(v,_,e){"use strict";e.r(_);var a=e(10),c=Object(a.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h2",{attrs:{id:"前言"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[v._v("#")]),v._v(" 前言")]),v._v(" "),_("p",[v._v("本文将调研下面几种脚手架的功能以及架构：")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("imooc-cli")])]),v._v(" "),_("li",[_("code",[v._v("vue-cli（1.x/2.x） => create-vue(3.x)")])]),v._v(" "),_("li",[_("code",[v._v("create-react-app")])]),v._v(" "),_("li",[_("code",[v._v("hey-cli")]),v._v(" => "),_("code",[v._v("jay-cli")])])]),v._v(" "),_("p",[v._v("最后梳理出自研脚手架 "),_("code",[v._v("jay-cli")]),v._v(" 所需的功能和架构")]),v._v(" "),_("h2",{attrs:{id:"imooc-cli-重点"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#imooc-cli-重点"}},[v._v("#")]),v._v(" imooc-cli（重点）")]),v._v(" "),_("blockquote",[_("p",[v._v("imooc-cli 是慕课网架构师课程中的脚手架")])]),v._v(" "),_("p",[v._v("解决痛点：")]),v._v(" "),_("ul",[_("li",[v._v("项目代码复用")])]),v._v(" "),_("p",[v._v("功能：")]),v._v(" "),_("ul",[_("li",[v._v("标准的项目初始化流程\n"),_("ul",[_("li",[v._v("准备阶段：命令行交互 "),_("code",[v._v("commander")]),v._v(" "),_("code",[v._v("inquirer")])]),v._v(" "),_("li",[v._v("执行阶段：多进程 "),_("code",[v._v("child_process")])]),v._v(" "),_("li",[v._v("下载阶段：本地缓存 "),_("code",[v._v("fse")]),v._v(" 、模板编译 "),_("code",[v._v("ejs")])])])])]),v._v(" "),_("p",[v._v("架构：")]),v._v(" "),_("p",[_("img",{attrs:{src:"https://oss-1252175178.cos.ap-shanghai.myqcloud.com/%E6%85%95%E8%AF%BE%E7%BD%91%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AF%BE%E7%A8%8B/%E8%84%9A%E6%89%8B%E6%9E%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE.jpeg",alt:""}})]),v._v(" "),_("p",[v._v("优点：")]),v._v(" "),_("ul",[_("li",[v._v("高可维护：\n"),_("ul",[_("li",[v._v("分包+利用lerna进行多包管理，便于维护")])])]),v._v(" "),_("li",[v._v("高性能：\n"),_("ul",[_("li",[v._v("分包+将代码拆分到不同模块中，提高安装效率")]),v._v(" "),_("li",[v._v("利用node多进程执行代码")])])])]),v._v(" "),_("p",[v._v("缺点：")]),v._v(" "),_("ul",[_("li",[v._v("模板为纯内部管理，不支持从外部git地址拷贝代码")])]),v._v(" "),_("p",[v._v("最佳实践：")]),v._v(" "),_("ul",[_("li",[v._v("lerna多包管理")]),v._v(" "),_("li",[v._v("command/yargs实现脚手架")])]),v._v(" "),_("h2",{attrs:{id:"vue-cli-create-vue-重点"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli-create-vue-重点"}},[v._v("#")]),v._v(" vue-cli/create-vue（重点）")]),v._v(" "),_("blockquote",[_("p",[v._v("Vue CLI 是一个基于 Vue.js 进行快速开发的完整系统。")]),v._v(" "),_("p",[v._v("Vue CLI 致力于将 Vue 生态中的工具基础标准化。它确保了各种构建工具能够基于智能的默认配置即可平稳衔接，这样你可以专注在撰写应用上，而不必花好几天去纠结配置的问题。与此同时，它也为每个工具提供了调整配置的灵活性，无需 eject。")])]),v._v(" "),_("p",[v._v("功能：")]),v._v(" "),_("ul",[_("li",[v._v("交互式项目脚手架（"),_("code",[v._v("@vue/cli")]),v._v("）")]),v._v(" "),_("li",[v._v("零配置原型开发（"),_("code",[v._v("@vue/cli")]),v._v(" + "),_("code",[v._v("@vue/cli-service-global")]),v._v("）")]),v._v(" "),_("li",[v._v("运行时依赖（"),_("code",[v._v("@vue/cli-service")]),v._v("）")]),v._v(" "),_("li",[v._v("官方插件集合")]),v._v(" "),_("li",[v._v("图形化界面创建和管理 vue.js 项目")])]),v._v(" "),_("p",[v._v("架构：")]),v._v(" "),_("ul",[_("li",[v._v("多包管理：vue-cli 使用 lerna，create-vue 使用 workspace")])]),v._v(" "),_("p",[v._v("优点：")]),v._v(" "),_("p",[v._v("缺点：")]),v._v(" "),_("h2",{attrs:{id:"create-react-app"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#create-react-app"}},[v._v("#")]),v._v(" create-react-app")]),v._v(" "),_("h2",{attrs:{id:"cm-cli"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#cm-cli"}},[v._v("#")]),v._v(" cm-cli")]),v._v(" "),_("p",[v._v("功能：")]),v._v(" "),_("ul",[_("li",[v._v("根据项目模板进行项目初始化")]),v._v(" "),_("li",[v._v("动态添加和删除模板")])]),v._v(" "),_("h2",{attrs:{id:"hey-cli-重点"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#hey-cli-重点"}},[v._v("#")]),v._v(" hey-cli（重点）")]),v._v(" "),_("blockquote",[_("p",[v._v("webpack脚手架，hot-dev-server，build。")]),v._v(" "),_("p",[v._v("不需要理解webpack，只需要知道如何配置就可以使用，摆脱繁琐重复的webpack配置。")])]),v._v(" "),_("p",[v._v("特点：")]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("提供脚手架")]),v._v("：可以生成vue、react、以及包含HeyUI组件库的项目，统一项目模板")]),v._v(" "),_("li",[_("strong",[v._v("内置一套默认的webpack配置")]),v._v("：降低webpack配置难度，一次全局安装，所有的开发项目都支持，不需要每个项目都安装配置 "),_("code",[v._v("webpack")]),v._v("，只需要配置 "),_("code",[v._v("hey.conf.js")]),v._v(" 配置文件即可使用")]),v._v(" "),_("li",[_("strong",[v._v("提高创建新项目速度")]),v._v("，webpack原来是十几二十个，封装后，项目中需要安装的依赖只有几个")])]),v._v(" "),_("p",[v._v("功能：")]),v._v(" "),_("ol",[_("li",[v._v("命令行交互")]),v._v(" "),_("li",[v._v("模板复制（hey init）")]),v._v(" "),_("li",[v._v("dev/build运行（内置默认webpack配置）")])]),v._v(" "),_("p",[v._v("配置：")]),v._v(" "),_("ul",[_("li",[v._v("hey.conf.js，package.json")]),v._v(" "),_("li",[v._v("webpack可扩展配置")])]),v._v(" "),_("p",[v._v("看了代码后，豁然开朗，下面是整理的一些功能的实现原理。")]),v._v(" "),_("h4",{attrs:{id:"_1、命令行交互"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1、命令行交互"}},[v._v("#")]),v._v(" 1、命令行交互")]),v._v(" "),_("ol",[_("li",[v._v("使用 commander、inquirer 等库控制流程")]),v._v(" "),_("li",[v._v("使用 chalk ora 等库控制输出样式")]),v._v(" "),_("li",[v._v("获取用户输入后，调用响应的task进行处理")])]),v._v(" "),_("h4",{attrs:{id:"_2、模板复制"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2、模板复制"}},[v._v("#")]),v._v(" 2、模板复制")]),v._v(" "),_("ol",[_("li",[v._v("使用 rimraf 删除现有目录")]),v._v(" "),_("li",[v._v("使用 download-git-repo git远程仓库拉取")]),v._v(" "),_("li",[v._v("使用 metalsmith 处理模板")])]),v._v(" "),_("h4",{attrs:{id:"_3、dev-build运行-内置默认webpack配置"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3、dev-build运行-内置默认webpack配置"}},[v._v("#")]),v._v(" 3、dev/build运行（内置默认webpack配置）")]),v._v(" "),_("ol",[_("li",[v._v("getConfig 查找配置文件 hey.js hey.conf.js package.json")]),v._v(" "),_("li",[v._v("generatorWebpackConfig 合并默认webpack配置和用户配置，返回 webpackConfig")]),v._v(" "),_("li",[v._v("var compiler = webpack(webpackConfig)")]),v._v(" "),_("li",[v._v("new WebpackDevServer(compiler, serverCfg)")]),v._v(" "),_("li",[v._v("监听webpack结束hook：compiler.hooks.done.tap('complete', (stats) => {})")]),v._v(" "),_("li",[v._v("任务结束，输出相关log")]),v._v(" "),_("li",[v._v("如果是 build 还需要将生成的文件 copy 一下")])]),v._v(" "),_("p",[v._v("缺点：")]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("项目升级困难")]),v._v("（需先升级脚手架）")]),v._v(" "),_("li",[v._v("可扩展性较弱")])]),v._v(" "),_("h2",{attrs:{id:"jay-cli-create-jay-重点"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#jay-cli-create-jay-重点"}},[v._v("#")]),v._v(" jay-cli/create-jay（重点）")]),v._v(" "),_("blockquote",[_("p",[v._v("高性能自研脚手架，供公司内部使用")])]),v._v(" "),_("p",[v._v("功能：")]),v._v(" "),_("ul",[_("li",[v._v("支持添加模板、动态模板渲染")])])])}),[],!1,null,null,null);_.default=c.exports}}]);