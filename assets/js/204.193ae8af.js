(window.webpackJsonp=window.webpackJsonp||[]).push([[204],{494:function(s,t,a){"use strict";a.r(t);var n=a(10),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("[TOC]")]),s._v(" "),t("h1",{attrs:{id:"week3-脚手架核心流程开发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#week3-脚手架核心流程开发"}},[s._v("#")]),s._v(" week3 - 脚手架核心流程开发")]),s._v(" "),t("h2",{attrs:{id:"本周导学"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本周导学"}},[s._v("#")]),s._v(" 本周导学")]),s._v(" "),t("h3",{attrs:{id:"将收获什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#将收获什么"}},[s._v("#")]),s._v(" 将收获什么")]),s._v(" "),t("ul",[t("li",[s._v("架构设计和技术方案设计全过程")]),s._v(" "),t("li",[s._v("脚手架执行核心流程和commander框架")]),s._v(" "),t("li",[s._v("如何让Node项目支持ES Module")])]),s._v(" "),t("h3",{attrs:{id:"主要内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#主要内容"}},[s._v("#")]),s._v(" 主要内容")]),s._v(" "),t("ul",[t("li",[s._v("脚手架需求分析和架构设计")]),s._v(" "),t("li",[s._v("脚手架模块拆分策略和core模块技术方案")]),s._v(" "),t("li",[s._v("脚手架执行准备过程实现")]),s._v(" "),t("li",[s._v("脚手架命令注册实现（基于commander）")])]),s._v(" "),t("h2",{attrs:{id:"_01-imooc-cli-脚手架需求分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_01-imooc-cli-脚手架需求分析"}},[s._v("#")]),s._v(" 01-imooc-cli 脚手架需求分析")]),s._v(" "),t("h3",{attrs:{id:"大厂标准项目流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#大厂标准项目流程"}},[s._v("#")]),s._v(" 大厂标准项目流程")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://oss-1252175178.cos.ap-shanghai.myqcloud.com/%E6%85%95%E8%AF%BE%E7%BD%91%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E5%8E%82%E5%81%9A%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%B5%81%E7%A8%8B.jpeg",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"脚手架需求分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#脚手架需求分析"}},[s._v("#")]),s._v(" 脚手架需求分析")]),s._v(" "),t("p",[s._v("从这张图看起，分析研发过程的痛点：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://oss-1252175178.cos.ap-shanghai.myqcloud.com/%E6%85%95%E8%AF%BE%E7%BD%91%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AF%BE%E7%A8%8B/%E8%84%9A%E6%89%8B%E6%9E%B6%E8%A6%81%E8%A7%A3%E5%86%B3%E7%9A%84%E7%97%9B%E7%82%B9.png",alt:""}})]),s._v(" "),t("h4",{attrs:{id:"痛点分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#痛点分析"}},[s._v("#")]),s._v(" 痛点分析")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("创建项目/组件时，存在大量重复代码拷贝")]),s._v("：快速复用已有沉淀")]),s._v(" "),t("li",[t("strong",[s._v("协同开发时，由于git操作不规范")]),s._v("，导致分支混乱，操作耗时：制定标准的git操作规范并集成到脚手架")]),s._v(" "),t("li",[t("strong",[s._v("发布上线耗时，而且容易出现各种错误")]),s._v("：制定标准的上线流程和规范并集成到脚手架")])]),s._v(" "),t("h4",{attrs:{id:"需求分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#需求分析"}},[s._v("#")]),s._v(" 需求分析")]),s._v(" "),t("blockquote",[t("p",[s._v("通用的研发脚手架")])]),s._v(" "),t("ul",[t("li",[s._v("通用的项目/组件创建能力\n"),t("ul",[t("li",[s._v("模板支持定制，定制后能够快速生效")]),s._v(" "),t("li",[s._v("模板支持快速接入，极低的接入成本")])])]),s._v(" "),t("li",[s._v("通用的项目/组件发布能力\n"),t("ul",[t("li",[s._v("发布过程自动完成标准的git操作")]),s._v(" "),t("li",[s._v("发布成功后自动删除开发分支并创建tag")]),s._v(" "),t("li",[s._v("发布后自动完成云构建、OSS上传、CDN上传、域名绑定")]),s._v(" "),t("li",[s._v("发布过程支持测试/正式两种模式")])])])]),s._v(" "),t("h3",{attrs:{id:"加餐-大厂是如何做-git-操作的"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#加餐-大厂是如何做-git-操作的"}},[s._v("#")]),s._v(" 加餐：大厂是如何做 git 操作的？")]),s._v(" "),t("ul",[t("li",[s._v("Git Flow")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://oss-1252175178.cos.ap-shanghai.myqcloud.com/%E6%85%95%E8%AF%BE%E7%BD%91%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E5%8E%82%E6%98%AF%E5%A6%82%E4%BD%95%E5%81%9A%20git%20%E6%93%8D%E4%BD%9C%E7%9A%84.jpeg",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"_02-imooc-cli-脚手架架构设计"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_02-imooc-cli-脚手架架构设计"}},[s._v("#")]),s._v(" 02-imooc-cli 脚手架架构设计")]),s._v(" "),t("h3",{attrs:{id:"绘制架构设计图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#绘制架构设计图"}},[s._v("#")]),s._v(" 绘制架构设计图")]),s._v(" "),t("p",[s._v("参考：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://oss-1252175178.cos.ap-shanghai.myqcloud.com/%E6%85%95%E8%AF%BE%E7%BD%91%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AF%BE%E7%A8%8B/%E8%84%9A%E6%89%8B%E6%9E%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE.jpeg",alt:""}})]),s._v(" "),t("p",[s._v("我的绘制：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://oss-1252175178.cos.ap-shanghai.myqcloud.com/%E6%85%95%E8%AF%BE%E7%BD%91%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AF%BE%E7%A8%8B/%E8%84%9A%E6%89%8B%E6%9E%B6%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE-%E8%87%AA%E5%88%B6.jpg",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"核心模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#核心模块"}},[s._v("#")]),s._v(" 核心模块")]),s._v(" "),t("ul",[t("li",[s._v("脚手架\n"),t("ul",[t("li",[s._v("脚手架核心框架")]),s._v(" "),t("li",[s._v("初始化体系")]),s._v(" "),t("li",[s._v("标准git操作体系")]),s._v(" "),t("li",[s._v("发布体系")])])]),s._v(" "),t("li",[s._v("服务\n"),t("ul",[t("li",[s._v("OPEN API")]),s._v(" "),t("li",[s._v("WebSocket")])])]),s._v(" "),t("li",[s._v("支撑体系\n"),t("ul",[t("li",[s._v("本地缓存")]),s._v(" "),t("li",[s._v("模板库")]),s._v(" "),t("li",[s._v("数据体系")]),s._v(" "),t("li",[s._v("代码仓库")]),s._v(" "),t("li",[s._v("资源体系")]),s._v(" "),t("li",[s._v("远程缓存")])])])]),s._v(" "),t("h2",{attrs:{id:"_03-脚手架模块拆分策略和core模块技术方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_03-脚手架模块拆分策略和core模块技术方案"}},[s._v("#")]),s._v(" 03-脚手架模块拆分策略和core模块技术方案")]),s._v(" "),t("h3",{attrs:{id:"拆分策略"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拆分策略"}},[s._v("#")]),s._v(" 拆分策略")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("核心模块：core")])]),s._v(" "),t("li",[t("strong",[s._v("命令模块：commands")]),s._v(" "),t("ul",[t("li",[s._v("初始化")]),s._v(" "),t("li",[s._v("发布")]),s._v(" "),t("li",[s._v("清除缓存")])])]),s._v(" "),t("li",[t("strong",[s._v("模型模块：models")]),s._v(" "),t("ul",[t("li",[s._v("Command 命令")]),s._v(" "),t("li",[s._v("Project 项目")]),s._v(" "),t("li",[s._v("Component 组件")]),s._v(" "),t("li",[s._v("Npm 模块")]),s._v(" "),t("li",[s._v("Git 仓库")])])]),s._v(" "),t("li",[t("strong",[s._v("工具模块：utils")]),s._v(" "),t("ul",[t("li",[s._v("Git 操作")]),s._v(" "),t("li",[s._v("云构建")]),s._v(" "),t("li",[s._v("工具方法")]),s._v(" "),t("li",[s._v("API 请求")]),s._v(" "),t("li",[s._v("Git API")])])])]),s._v(" "),t("h3",{attrs:{id:"core模块技术方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#core模块技术方案"}},[s._v("#")]),s._v(" core模块技术方案")]),s._v(" "),t("p",[s._v("命令执行流程：")]),s._v(" "),t("ul",[t("li",[s._v("准备阶段（本周开发）")]),s._v(" "),t("li",[s._v("命令注册（下周开发）")]),s._v(" "),t("li",[s._v("命令执行（下周开发）")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://oss-1252175178.cos.ap-shanghai.myqcloud.com/%E6%85%95%E8%AF%BE%E7%BD%91%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AF%BE%E7%A8%8B/%E8%84%9A%E6%89%8B%E6%9E%B6core%E6%A8%A1%E5%9D%97%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88.jpeg",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"涉及技术点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#涉及技术点"}},[s._v("#")]),s._v(" 涉及技术点")]),s._v(" "),t("p",[s._v("核心库")]),s._v(" "),t("ul",[t("li",[s._v("import-local")]),s._v(" "),t("li",[s._v("commander")])]),s._v(" "),t("p",[s._v("工具库")]),s._v(" "),t("ul",[t("li",[s._v("npmlog")]),s._v(" "),t("li",[s._v("fs-extra")]),s._v(" "),t("li",[s._v("semver")]),s._v(" "),t("li",[s._v("colors")]),s._v(" "),t("li",[s._v("user-home")]),s._v(" "),t("li",[s._v("dotenv")]),s._v(" "),t("li",[s._v("root-check")])]),s._v(" "),t("h2",{attrs:{id:"_04-脚手架执行准备实现"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_04-脚手架执行准备实现"}},[s._v("#")]),s._v(" 04-脚手架执行准备实现")]),s._v(" "),t("h3",{attrs:{id:"主要内容-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#主要内容-2"}},[s._v("#")]),s._v(" 主要内容：")]),s._v(" "),t("ul",[t("li",[s._v("拆包")]),s._v(" "),t("li",[s._v("检查版本号")]),s._v(" "),t("li",[s._v("检查node版本")]),s._v(" "),t("li",[s._v("检查root启动")]),s._v(" "),t("li",[s._v("检查用户主目录")]),s._v(" "),t("li",[s._v("检查入参")]),s._v(" "),t("li",[s._v("检查环境变量")]),s._v(" "),t("li",[s._v("检查是否为最新版本（如有，则提示更新）")])]),s._v(" "),t("h3",{attrs:{id:"调试技巧"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#调试技巧"}},[s._v("#")]),s._v(" 调试技巧")]),s._v(" "),t("ul",[t("li",[s._v("如何调试 "),t("code",[s._v("jay-cli-dev")]),s._v(" ？\n"),t("ul",[t("li",[s._v("查找 "),t("code",[s._v("jay-cli-dev")]),s._v(" bin文件地址： "),t("code",[s._v("which jay-cli-dev")])]),s._v(" "),t("li",[s._v("新建 "),t("code",[s._v("lanch.json")]),s._v(" 文件，并设置其中的 "),t("code",[s._v('"program": "/Users/aaron/.nvm/versions/node/v14.15.4/bin/jay-cli-dev"')])]),s._v(" "),t("li",[s._v("打断点，然后点击运行")])])]),s._v(" "),t("li",[s._v("如何快速进入第三方依赖包的源码？\n"),t("ul",[t("li",[s._v("貌似提供了ts文件的包就不能直接进入了")]),s._v(" "),t("li",[s._v("可以通过 node_modules 直接查看源码")])])]),s._v(" "),t("li",[s._v("如何快速折叠所有代码？\n"),t("ul",[t("li",[s._v("vscode快捷键 "),t("code",[s._v("ctrl+k+0")]),s._v(" 折叠所有代码")]),s._v(" "),t("li",[s._v("vscode快捷键 "),t("code",[s._v("ctrl+k+j")]),s._v(" 展开所有代码")])])])]),s._v(" "),t("h3",{attrs:{id:"command使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#command使用"}},[s._v("#")]),s._v(" Command使用")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token hashbang comment"}},[s._v("#!/usr/bin/env node")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" commander "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'commander'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" pkg "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../package.json'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取commander的单例")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// const { program } = commander.program;")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 手动实例化一个Command实例")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" program "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("commander"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nprogram\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("keys")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pkg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("usage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'<command> [options]'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pkg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("option")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-d, --debug'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'是否开启调试模式'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("option")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-e, --env <envName>'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'获取环境变量名称'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// command 注册命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" clone "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" program"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'clone <source> [destination]'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nclone\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'clone a repository'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("option")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-f, --force'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'是否强制拷贝'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("action")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" destination"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" comObj")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'do clone'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" destination"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" comObj"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("force"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// addCommand 注册命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" service "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("commander"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'service'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nservice\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'start [port]'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'start service at some port'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("action")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'do service start'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nservice\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'stop'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'stop service'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("action")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'stop service'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nprogram"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addCommand")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// jay-test-cli install init -> jay-cli init")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// program")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   .command('install [name]', 'install package', {")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     executableFile: 'jay-cli', // 可还用来实现脚手架串联")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     // isDefault: true // 将此命令作为默认的执行命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     hidden: true // 隐藏command")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   })")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   .alias('i');")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// program")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   .arguments('<cmd> [options]') // 类似 Yargs.demandCommand，强制参数必须传递")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   .description('test command', {")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     cmd: 'command to run',")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     options: 'options for command'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   })")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   .action((cmd, options) => {")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     console.log(cmd, options);")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   });")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 高级定制1：自定义help信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// console.log(program.helpInformation()); // 展示帮助信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// program.helpInformation = function() {  // 直接修改帮助信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   return '' ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// } ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// program.on('--help', () => { // 监听参数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   console.log('your help information\\n');")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// })")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 高级定制2：实现debug模式")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// program.on('option.debug', () => {")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   if (program.debug) {")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     process.env.LOG_LEVEL = 'verbose';")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   }")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   console.log(process.env.LOG_LEVEL);")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// })")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 高级定制3：对未知命令监听")]),s._v("\nprogram"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'command:*'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("obj")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("error")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'未知的命令：'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" obj"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" availableCommands "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" program"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("commands"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("map")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("cmd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" cmd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'可用命令：'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" availableCommands"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("','")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nprogram\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("parse")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("argv"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br"),t("span",{staticClass:"line-number"},[s._v("84")]),t("br"),t("span",{staticClass:"line-number"},[s._v("85")]),t("br"),t("span",{staticClass:"line-number"},[s._v("86")]),t("br"),t("span",{staticClass:"line-number"},[s._v("87")]),t("br"),t("span",{staticClass:"line-number"},[s._v("88")]),t("br"),t("span",{staticClass:"line-number"},[s._v("89")]),t("br"),t("span",{staticClass:"line-number"},[s._v("90")]),t("br"),t("span",{staticClass:"line-number"},[s._v("91")]),t("br"),t("span",{staticClass:"line-number"},[s._v("92")]),t("br")])]),t("h3",{attrs:{id:"源码分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#源码分析"}},[s._v("#")]),s._v(" 源码分析：")]),s._v(" "),t("h4",{attrs:{id:"require处理文件的方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#require处理文件的方式"}},[s._v("#")]),s._v(" Require处理文件的方式")]),s._v(" "),t("blockquote",[t("p",[s._v("require 支持 .js/.json/.node 三种格式的文件")])]),s._v(" "),t("ul",[t("li",[s._v("处理 "),t("code",[s._v(".js")]),s._v(" 时 -> 使用js引擎解析，要求该 "),t("code",[s._v(".js")]),s._v(" 文件使用 "),t("code",[s._v("module.exports/exports")]),s._v(" 输出，否则会报错")]),s._v(" "),t("li",[s._v("处理 "),t("code",[s._v(".json")]),s._v(" 时 -> 使用 JSON.parse 解析，并返回json，如 "),t("code",[s._v("const pkg = require('./package.json')")])]),s._v(" "),t("li",[s._v("处理 "),t("code",[s._v(".node")]),s._v(" (是一个C++ Addon插件)时 -> 使用 process.dlopen 打开")]),s._v(" "),t("li",[s._v("处理其他格式文件时 -> 会当成 "),t("code",[s._v(".js")]),s._v(" 文件处理，比如 "),t("code",[s._v("require('./file.txt')")]),s._v(" 或 "),t("code",[s._v("require('./readme.md')")])])]),s._v(" "),t("h4",{attrs:{id:"npmlog-定制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npmlog-定制"}},[s._v("#")]),s._v(" npmlog 定制")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" log "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'npmlog'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 自定义log")]),s._v("\nlog"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addLevel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("fg")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'green'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlog"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("addLevel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'success'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2500")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("fg")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'green'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("bold")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nlog"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("level "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'verbose'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"_06-node项目如何支持esmodule"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_06-node项目如何支持esmodule"}},[s._v("#")]),s._v(" 06-Node项目如何支持ESModule")]),s._v(" "),t("ul",[t("li",[s._v("webpack 配置 "),t("code",[s._v("babel-loader")])]),s._v(" "),t("li",[s._v("node 最新功能 "),t("code",[s._v(".mjs")])])]),s._v(" "),t("h2",{attrs:{id:"本周作业"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本周作业"}},[s._v("#")]),s._v(" 本周作业")]),s._v(" "),t("ul",[t("li",[s._v("标准\n"),t("ul",[t("li",[s._v("绘制 imooc-cli 脚手架架构设计图")]),s._v(" "),t("li",[s._v("实现 imooc-cli 脚手架准备过程代码")]),s._v(" "),t("li",[s._v("通过 commander 框架实现一个脚手架，包含自定义 option 和 command 功能")])])]),s._v(" "),t("li",[s._v("进阶\n"),t("ul",[t("li",[s._v("通过 webpack 和 原生两种方式实现 Node 对 ESModule 的支持")])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);