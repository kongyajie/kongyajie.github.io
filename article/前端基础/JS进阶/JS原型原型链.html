<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS原型和原型链 | 前端AK君</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?e864a64a0fefae1239747c553f0d6579";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
    <script src="https://cdn-go.cn/aegis/aegis-sdk/latest/aegis.min.js"></script>
    <script>
      var aegis = new Aegis({
        id: 'yaoVL8AlJ1zqMDq4dG', // 上报 id
        uin: 'xxx', // 用户唯一 ID（可选）
        reportApiSpeed: true, // 接口测速
        reportAssetSpeed: true, // 静态资源测速
        spa: true // spa 应用页面跳转的时候开启 pv 计算
      });
    </script>
    <meta name="description" content="系统性学习，打造完善的知识体系">
    
    <link rel="preload" href="/assets/css/0.styles.30ce95d4.css" as="style"><link rel="preload" href="/assets/js/app.a2d0ac2d.js" as="script"><link rel="preload" href="/assets/js/2.6d2266aa.js" as="script"><link rel="preload" href="/assets/js/60.b40b1d39.js" as="script"><link rel="prefetch" href="/assets/js/10.a56f3f8d.js"><link rel="prefetch" href="/assets/js/100.13a2d5e4.js"><link rel="prefetch" href="/assets/js/101.766996fe.js"><link rel="prefetch" href="/assets/js/102.263781e6.js"><link rel="prefetch" href="/assets/js/103.192765b9.js"><link rel="prefetch" href="/assets/js/104.8280cd3d.js"><link rel="prefetch" href="/assets/js/105.3ad0084c.js"><link rel="prefetch" href="/assets/js/106.0344c291.js"><link rel="prefetch" href="/assets/js/107.80e4eaf9.js"><link rel="prefetch" href="/assets/js/108.95402323.js"><link rel="prefetch" href="/assets/js/109.e42d7c45.js"><link rel="prefetch" href="/assets/js/11.c0cc9e98.js"><link rel="prefetch" href="/assets/js/110.fe64548d.js"><link rel="prefetch" href="/assets/js/111.78281284.js"><link rel="prefetch" href="/assets/js/112.eccae065.js"><link rel="prefetch" href="/assets/js/113.458fbd21.js"><link rel="prefetch" href="/assets/js/114.3157d04b.js"><link rel="prefetch" href="/assets/js/115.9a08b5bf.js"><link rel="prefetch" href="/assets/js/116.98c14a80.js"><link rel="prefetch" href="/assets/js/117.c99eb6ef.js"><link rel="prefetch" href="/assets/js/118.9415eb32.js"><link rel="prefetch" href="/assets/js/119.8677a924.js"><link rel="prefetch" href="/assets/js/12.ada7d686.js"><link rel="prefetch" href="/assets/js/120.90c94c3f.js"><link rel="prefetch" href="/assets/js/121.289ff03f.js"><link rel="prefetch" href="/assets/js/122.163e6cf3.js"><link rel="prefetch" href="/assets/js/123.6cf64cab.js"><link rel="prefetch" href="/assets/js/124.4fbd6264.js"><link rel="prefetch" href="/assets/js/125.8f408d49.js"><link rel="prefetch" href="/assets/js/126.fecd9dfa.js"><link rel="prefetch" href="/assets/js/127.fff3baac.js"><link rel="prefetch" href="/assets/js/128.9006ec12.js"><link rel="prefetch" href="/assets/js/129.bd73fd0d.js"><link rel="prefetch" href="/assets/js/13.7d5054e0.js"><link rel="prefetch" href="/assets/js/130.82ec8ca8.js"><link rel="prefetch" href="/assets/js/131.25af9bac.js"><link rel="prefetch" href="/assets/js/132.8517ca6b.js"><link rel="prefetch" href="/assets/js/133.f835df32.js"><link rel="prefetch" href="/assets/js/134.65e4285e.js"><link rel="prefetch" href="/assets/js/135.d5ae9ddf.js"><link rel="prefetch" href="/assets/js/136.b4809f7f.js"><link rel="prefetch" href="/assets/js/137.4a9d350b.js"><link rel="prefetch" href="/assets/js/138.0817585f.js"><link rel="prefetch" href="/assets/js/139.25212b17.js"><link rel="prefetch" href="/assets/js/14.dfdc52dc.js"><link rel="prefetch" href="/assets/js/140.f61db2a2.js"><link rel="prefetch" href="/assets/js/141.4d216e94.js"><link rel="prefetch" href="/assets/js/142.51c5e63e.js"><link rel="prefetch" href="/assets/js/143.5728dc3f.js"><link rel="prefetch" href="/assets/js/144.f287e90f.js"><link rel="prefetch" href="/assets/js/145.1cf839cb.js"><link rel="prefetch" href="/assets/js/146.23f4f258.js"><link rel="prefetch" href="/assets/js/147.d39c4f95.js"><link rel="prefetch" href="/assets/js/148.b1a175dc.js"><link rel="prefetch" href="/assets/js/149.a52de27b.js"><link rel="prefetch" href="/assets/js/15.4f0aba52.js"><link rel="prefetch" href="/assets/js/150.10168789.js"><link rel="prefetch" href="/assets/js/151.712cd6a8.js"><link rel="prefetch" href="/assets/js/152.3fe32db9.js"><link rel="prefetch" href="/assets/js/153.58f830dd.js"><link rel="prefetch" href="/assets/js/154.f5506c0b.js"><link rel="prefetch" href="/assets/js/155.715a7171.js"><link rel="prefetch" href="/assets/js/156.c373b316.js"><link rel="prefetch" href="/assets/js/157.7ae757e4.js"><link rel="prefetch" href="/assets/js/158.8547baa5.js"><link rel="prefetch" href="/assets/js/159.9236e9b2.js"><link rel="prefetch" href="/assets/js/16.401bab98.js"><link rel="prefetch" href="/assets/js/160.38f02fa7.js"><link rel="prefetch" href="/assets/js/161.33cfc804.js"><link rel="prefetch" href="/assets/js/162.b936f336.js"><link rel="prefetch" href="/assets/js/163.457054d9.js"><link rel="prefetch" href="/assets/js/164.d8f480fd.js"><link rel="prefetch" href="/assets/js/165.8d33e67c.js"><link rel="prefetch" href="/assets/js/166.24fd6fff.js"><link rel="prefetch" href="/assets/js/167.a71cfd81.js"><link rel="prefetch" href="/assets/js/168.f195e962.js"><link rel="prefetch" href="/assets/js/169.a233777b.js"><link rel="prefetch" href="/assets/js/17.ff1a5c44.js"><link rel="prefetch" href="/assets/js/170.e9f4408c.js"><link rel="prefetch" href="/assets/js/171.59c967e2.js"><link rel="prefetch" href="/assets/js/172.822a3819.js"><link rel="prefetch" href="/assets/js/173.c37db229.js"><link rel="prefetch" href="/assets/js/174.333678df.js"><link rel="prefetch" href="/assets/js/175.7c0f4462.js"><link rel="prefetch" href="/assets/js/176.29ec561f.js"><link rel="prefetch" href="/assets/js/177.66c9abc0.js"><link rel="prefetch" href="/assets/js/178.7ac94227.js"><link rel="prefetch" href="/assets/js/179.84edddc4.js"><link rel="prefetch" href="/assets/js/18.48189038.js"><link rel="prefetch" href="/assets/js/180.f9200d00.js"><link rel="prefetch" href="/assets/js/181.3dbd3f3d.js"><link rel="prefetch" href="/assets/js/182.92327331.js"><link rel="prefetch" href="/assets/js/183.6f4a7fa6.js"><link rel="prefetch" href="/assets/js/184.23cc8f2b.js"><link rel="prefetch" href="/assets/js/185.13f68d36.js"><link rel="prefetch" href="/assets/js/186.fee33fbb.js"><link rel="prefetch" href="/assets/js/187.45622918.js"><link rel="prefetch" href="/assets/js/188.d660fe0b.js"><link rel="prefetch" href="/assets/js/189.d66284c8.js"><link rel="prefetch" href="/assets/js/19.fe215aac.js"><link rel="prefetch" href="/assets/js/190.47c4010f.js"><link rel="prefetch" href="/assets/js/191.43e428b5.js"><link rel="prefetch" href="/assets/js/192.204764f1.js"><link rel="prefetch" href="/assets/js/193.5ba3e1f7.js"><link rel="prefetch" href="/assets/js/194.994dc46d.js"><link rel="prefetch" href="/assets/js/195.089189c2.js"><link rel="prefetch" href="/assets/js/196.dcb90b2f.js"><link rel="prefetch" href="/assets/js/197.f08d0d50.js"><link rel="prefetch" href="/assets/js/198.556c32f1.js"><link rel="prefetch" href="/assets/js/199.31bd0633.js"><link rel="prefetch" href="/assets/js/20.d701da2a.js"><link rel="prefetch" href="/assets/js/200.723aec7c.js"><link rel="prefetch" href="/assets/js/201.66d2af64.js"><link rel="prefetch" href="/assets/js/202.8edb3a46.js"><link rel="prefetch" href="/assets/js/203.ff89198b.js"><link rel="prefetch" href="/assets/js/204.193ae8af.js"><link rel="prefetch" href="/assets/js/205.c829f1c5.js"><link rel="prefetch" href="/assets/js/206.37bea224.js"><link rel="prefetch" href="/assets/js/207.db95cc40.js"><link rel="prefetch" href="/assets/js/208.97270da0.js"><link rel="prefetch" href="/assets/js/209.c0683036.js"><link rel="prefetch" href="/assets/js/21.1080a5de.js"><link rel="prefetch" href="/assets/js/210.93d642a2.js"><link rel="prefetch" href="/assets/js/211.5901dc1b.js"><link rel="prefetch" href="/assets/js/212.4f664375.js"><link rel="prefetch" href="/assets/js/213.fa04deb5.js"><link rel="prefetch" href="/assets/js/214.7b142a2c.js"><link rel="prefetch" href="/assets/js/215.7803263b.js"><link rel="prefetch" href="/assets/js/216.64db2edb.js"><link rel="prefetch" href="/assets/js/217.b41dbc99.js"><link rel="prefetch" href="/assets/js/218.e9327b94.js"><link rel="prefetch" href="/assets/js/219.63d9aab5.js"><link rel="prefetch" href="/assets/js/22.76e06f13.js"><link rel="prefetch" href="/assets/js/220.003286bb.js"><link rel="prefetch" href="/assets/js/221.b8b15996.js"><link rel="prefetch" href="/assets/js/222.0a20e90e.js"><link rel="prefetch" href="/assets/js/223.a19bafae.js"><link rel="prefetch" href="/assets/js/224.e9bcab46.js"><link rel="prefetch" href="/assets/js/225.5a36176a.js"><link rel="prefetch" href="/assets/js/226.be890eda.js"><link rel="prefetch" href="/assets/js/227.0e73737e.js"><link rel="prefetch" href="/assets/js/228.44593996.js"><link rel="prefetch" href="/assets/js/229.01729fa1.js"><link rel="prefetch" href="/assets/js/23.7076ecb8.js"><link rel="prefetch" href="/assets/js/24.d236b1c8.js"><link rel="prefetch" href="/assets/js/25.085e91d6.js"><link rel="prefetch" href="/assets/js/26.8c2f26f2.js"><link rel="prefetch" href="/assets/js/27.a1e3cc80.js"><link rel="prefetch" href="/assets/js/28.6c00042a.js"><link rel="prefetch" href="/assets/js/29.cfd8d697.js"><link rel="prefetch" href="/assets/js/3.b6a2a037.js"><link rel="prefetch" href="/assets/js/30.3d728bce.js"><link rel="prefetch" href="/assets/js/31.526dedbf.js"><link rel="prefetch" href="/assets/js/32.6b3ecd17.js"><link rel="prefetch" href="/assets/js/33.cabdeeb0.js"><link rel="prefetch" href="/assets/js/34.fa91d53d.js"><link rel="prefetch" href="/assets/js/35.c66844f8.js"><link rel="prefetch" href="/assets/js/36.3fa680ce.js"><link rel="prefetch" href="/assets/js/37.a92ad777.js"><link rel="prefetch" href="/assets/js/38.e7cc8ec1.js"><link rel="prefetch" href="/assets/js/39.2796c271.js"><link rel="prefetch" href="/assets/js/4.e81d099d.js"><link rel="prefetch" href="/assets/js/40.daf5b79e.js"><link rel="prefetch" href="/assets/js/41.eef20117.js"><link rel="prefetch" href="/assets/js/42.e8f1e994.js"><link rel="prefetch" href="/assets/js/43.f61d31c8.js"><link rel="prefetch" href="/assets/js/44.8dbd447e.js"><link rel="prefetch" href="/assets/js/45.66449725.js"><link rel="prefetch" href="/assets/js/46.4af09bf8.js"><link rel="prefetch" href="/assets/js/47.1289bfb2.js"><link rel="prefetch" href="/assets/js/48.a4fb9dbd.js"><link rel="prefetch" href="/assets/js/49.8751b36a.js"><link rel="prefetch" href="/assets/js/5.c08ba69c.js"><link rel="prefetch" href="/assets/js/50.75e594dd.js"><link rel="prefetch" href="/assets/js/51.3d254128.js"><link rel="prefetch" href="/assets/js/52.9c1413b9.js"><link rel="prefetch" href="/assets/js/53.5a3597d7.js"><link rel="prefetch" href="/assets/js/54.0d47034c.js"><link rel="prefetch" href="/assets/js/55.6d652079.js"><link rel="prefetch" href="/assets/js/56.ecc52ae0.js"><link rel="prefetch" href="/assets/js/57.ecfbc927.js"><link rel="prefetch" href="/assets/js/58.7cd62408.js"><link rel="prefetch" href="/assets/js/59.204705c1.js"><link rel="prefetch" href="/assets/js/6.6c5dca8e.js"><link rel="prefetch" href="/assets/js/61.0b04acf8.js"><link rel="prefetch" href="/assets/js/62.7fbeb25d.js"><link rel="prefetch" href="/assets/js/63.b709d9fc.js"><link rel="prefetch" href="/assets/js/64.e183bd0e.js"><link rel="prefetch" href="/assets/js/65.c89124e0.js"><link rel="prefetch" href="/assets/js/66.caa96c79.js"><link rel="prefetch" href="/assets/js/67.11d21c7a.js"><link rel="prefetch" href="/assets/js/68.be82890e.js"><link rel="prefetch" href="/assets/js/69.14649e16.js"><link rel="prefetch" href="/assets/js/7.9d17a6f4.js"><link rel="prefetch" href="/assets/js/70.a7391131.js"><link rel="prefetch" href="/assets/js/71.437f0d23.js"><link rel="prefetch" href="/assets/js/72.5d8001be.js"><link rel="prefetch" href="/assets/js/73.a4a5d2ac.js"><link rel="prefetch" href="/assets/js/74.cd496622.js"><link rel="prefetch" href="/assets/js/75.773ff345.js"><link rel="prefetch" href="/assets/js/76.176d2fa0.js"><link rel="prefetch" href="/assets/js/77.c38d66f9.js"><link rel="prefetch" href="/assets/js/78.8ca89620.js"><link rel="prefetch" href="/assets/js/79.21f0b5ad.js"><link rel="prefetch" href="/assets/js/8.61c359d6.js"><link rel="prefetch" href="/assets/js/80.e75ea7ff.js"><link rel="prefetch" href="/assets/js/81.48187974.js"><link rel="prefetch" href="/assets/js/82.0f048d77.js"><link rel="prefetch" href="/assets/js/83.d2b53680.js"><link rel="prefetch" href="/assets/js/84.0aba3b37.js"><link rel="prefetch" href="/assets/js/85.7d57722c.js"><link rel="prefetch" href="/assets/js/86.b07deb45.js"><link rel="prefetch" href="/assets/js/87.3ea155a5.js"><link rel="prefetch" href="/assets/js/88.0369b082.js"><link rel="prefetch" href="/assets/js/89.8d286a9e.js"><link rel="prefetch" href="/assets/js/9.b44b1047.js"><link rel="prefetch" href="/assets/js/90.6cb0b442.js"><link rel="prefetch" href="/assets/js/91.3bd0ca3f.js"><link rel="prefetch" href="/assets/js/92.e244701b.js"><link rel="prefetch" href="/assets/js/93.ec9d3001.js"><link rel="prefetch" href="/assets/js/94.517396bc.js"><link rel="prefetch" href="/assets/js/95.570e2963.js"><link rel="prefetch" href="/assets/js/96.d4608a89.js"><link rel="prefetch" href="/assets/js/97.4814fa03.js"><link rel="prefetch" href="/assets/js/98.b57acf57.js"><link rel="prefetch" href="/assets/js/99.662fa199.js">
    <link rel="stylesheet" href="/assets/css/0.styles.30ce95d4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="前端AK君" class="logo"> <span class="site-name can-hide">前端AK君</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/kongyajie" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/kongyajie" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JS进阶</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/article/前端基础/JS进阶/JS进阶系列.html" class="sidebar-link">JS进阶系列</a></li><li><a href="/article/前端基础/JS进阶/JS概览.html" class="sidebar-link">JS概览</a></li><li><a href="/article/前端基础/JS进阶/JS类型.html" class="sidebar-link">JS类型</a></li><li><a href="/article/前端基础/JS进阶/JS原型原型链.html" class="active sidebar-link">JS原型和原型链</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#一、实现一个person类" class="sidebar-link">一、实现一个Person类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#第一版" class="sidebar-link">第一版</a></li><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#第二版" class="sidebar-link">第二版</a></li><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#第三版" class="sidebar-link">第三版</a></li><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#第四版" class="sidebar-link">第四版</a></li><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#第五版" class="sidebar-link">第五版</a></li><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#第六版" class="sidebar-link">第六版</a></li><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#小结" class="sidebar-link">小结</a></li></ul></li><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#二、原型链" class="sidebar-link">二、原型链</a></li><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#三、继承的实现方式" class="sidebar-link">三、继承的实现方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#es5继承" class="sidebar-link">ES5继承</a></li><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#es6继承" class="sidebar-link">ES6继承</a></li></ul></li><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#四、object对象上的属性和方法" class="sidebar-link">四、Object对象上的属性和方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#_1、创建相关" class="sidebar-link">1、创建相关</a></li><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#_2、属性相关" class="sidebar-link">2、属性相关</a></li><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#_3、原型相关" class="sidebar-link">3、原型相关</a></li><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#_4、其他" class="sidebar-link">4、其他</a></li></ul></li><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#五、javascript是如何设计对象的" class="sidebar-link">五、JavaScript是如何设计对象的？</a></li><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#六、javascript是如何实现面向对象的" class="sidebar-link">六、JavaScript是如何实现面向对象的？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#_1、基于原型vs基于类" class="sidebar-link">1、基于原型vs基于类</a></li><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#_2、原型系统" class="sidebar-link">2、原型系统</a></li><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#_3、javascript中的类" class="sidebar-link">3、JavaScript中的类</a></li></ul></li><li class="sidebar-sub-header"><a href="/article/前端基础/JS进阶/JS原型原型链.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/article/前端基础/JS进阶/JS执行机制.html" class="sidebar-link">JS执行机制</a></li><li><a href="/article/前端基础/JS进阶/JS异步编程.html" class="sidebar-link">JS异步编程</a></li><li><a href="/article/前端基础/JS进阶/JS异步进阶.html" class="sidebar-link">JS异步进阶</a></li><li><a href="/article/前端基础/JS进阶/JS异常处理.html" class="sidebar-link">JS异常处理</a></li><li><a href="/article/前端基础/JS进阶/JS精选题集.html" class="sidebar-link">JS精选题集</a></li><li><a href="/article/前端基础/JS编程/总览.html" class="sidebar-link">JS编程</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端自检</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js原型和原型链"><a href="#js原型和原型链" class="header-anchor">#</a> JS原型和原型链</h1> <p>在介绍原型之前，我们先来看一个例子</p> <blockquote><p>目标：JS实现一个 Person 类，包含一些属性，和一些方法</p></blockquote> <h2 id="一、实现一个person类"><a href="#一、实现一个person类" class="header-anchor">#</a> 一、实现一个Person类</h2> <h3 id="第一版"><a href="#第一版" class="header-anchor">#</a> 第一版</h3> <p>方案：使用工厂模式创建类</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  person<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  person<span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  person<span class="token punctuation">.</span><span class="token function-variable function">play</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'play'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  person<span class="token punctuation">.</span><span class="token function-variable function">sleep</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sleep'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> person<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> aaron <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'Aaron'</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> vera <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'Vera'</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
aaron<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vera<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>不足之处：每次创建对象都重新创建方法</p> <h3 id="第二版"><a href="#第二版" class="header-anchor">#</a> 第二版</h3> <p>改进思路：提取公共方法，在 <code>sharedMethods</code> 中单独管理，需要时引用获取</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> sharedMethods <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">play</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'play'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">sleep</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sleep'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  person<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  person<span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  person<span class="token punctuation">.</span>play <span class="token operator">=</span> sharedMethods<span class="token punctuation">.</span>play<span class="token punctuation">;</span>
  person<span class="token punctuation">.</span>sleep <span class="token operator">=</span> sharedMethods<span class="token punctuation">.</span>sleep<span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> person<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> aaron <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'Aaron'</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> vera <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'Vera'</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
aaron<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vera<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>不足之处：<code>sharedMethods</code> 单独管理成本高，而且也没有解决方法多次创建的问题</p> <h3 id="第三版"><a href="#第三版" class="header-anchor">#</a> 第三版</h3> <p>改进方案：使用 <code>Object.create</code> 代理 <code>sharedMethods</code> 上的方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> sharedMethods <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">play</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'play'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">sleep</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sleep'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> person <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>sharedMethods<span class="token punctuation">)</span><span class="token punctuation">;</span>
  person<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  person<span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> person<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> aaron <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'Aaron'</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> vera <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'Vera'</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
aaron<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vera<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>这里 <strong>Object.create</strong> 帮助我们建立了一个指向 <code>sharedMethods</code> 的<strong>代理</strong>。</p> <p>因此 <code>aaron</code> 对象虽然上并没有 <code>play</code> 方法，但是通过这个代理，可以获取到。解决了方法复用的问题。</p> <p><strong>不足之处</strong>：未解决 <code>sharedMethods</code> 单独管理成本高</p> <h3 id="第四版"><a href="#第四版" class="header-anchor">#</a> 第四版</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> person <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
  person<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  person<span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> person<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">play</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'play'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sleep</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sleep'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> aaron <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'Aaron'</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> vera <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'Vera'</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
aaron<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vera<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>利用 <code>javascript</code> 提供的 <code>prototype</code> 属性代替 <code>sharedMethods</code> ，来保存这些公用方法。</p> <blockquote><p>定义： <strong>prototype</strong> 是所有js函数都有的一个属性，我们可以用它来在示例间共享方法</p></blockquote> <h3 id="第五版"><a href="#第五版" class="header-anchor">#</a> 第五版</h3> <p>使用 <code>new</code> 关键字简化：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">play</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'play'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sleep</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sleep'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> aaron <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Aaron'</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> vera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Vera'</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
aaron<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vera<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>这里我们在创建对象时使用了 new 关键字 <code>new Person()</code>，代替原来的 <code>Person()</code>，效果其实是一样的，而且构造函数精简了不少。</p> <p>new 关键词做了很多事情：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token keyword">this</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">// 1.创建名为this的对象，然后将这个对象代理到 Person.prototype 上，因此this对象拥有它上面的方法</span>
<span class="token comment">// this.name = name;</span>
<span class="token comment">// this.age = age;</span>
<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// 2.返回创建的这个对象</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>为了加深对 <code>new</code> 的印象，我们可以自己模拟实现一个 new ：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 模拟new （不使用 Object.create）
 * @ctor 构造函数
 * @arg 参数
 **/</span>
<span class="token keyword">function</span> <span class="token function">myNew</span><span class="token punctuation">(</span><span class="token parameter">ctor<span class="token punctuation">,</span> <span class="token operator">...</span>arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 1.创建一个空对象，等同于 let obj = new Object();</span>
  obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> ctor<span class="token punctuation">.</span>prototype <span class="token comment">// 2.将空对象obj的__proto__属性指向构造函数的 prototype 原型属性，来代理到构造函数上的方法</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">ctor</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token operator">...</span>arg<span class="token punctuation">)</span> <span class="token comment">// 3.对以obj为上下文，执行构造函数，并返回结果</span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> res <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> res <span class="token operator">:</span> obj <span class="token comment">// 4.若构造函数返回的是一个对象，则返回这个对象，否则返回第一步创建的obj</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 模拟new （使用 Object.create）
 * @ctor 构造函数
 * @arg 参数
 **/</span>
<span class="token keyword">function</span> <span class="token function">myNew2</span><span class="token punctuation">(</span><span class="token parameter">ctor<span class="token punctuation">,</span> <span class="token operator">...</span>arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>ctor<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">// 1. 创建一个空对象，并代理到 ctor.prototype 的方法上，同上面的第1和第2步</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">ctor</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token operator">...</span>arg<span class="token punctuation">)</span> <span class="token comment">// 同上</span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> res <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> res <span class="token operator">:</span> obj <span class="token comment">// 同上</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token function">myNew</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> p3 <span class="token operator">=</span> <span class="token function">myNew2</span><span class="token punctuation">(</span>Array<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="第六版"><a href="#第六版" class="header-anchor">#</a> 第六版</h3> <p>使用  <code>class</code> 实现</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'play'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sleep'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> aaron <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Aaron'</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> vera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Vera'</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
aaron<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vera<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h3> <p>上面的示例中，我们使用了几种不同的方式模拟实现 Person 类。</p> <p>这也引出了几个JS原型中最核心的基础概念，比如 <code>prototype</code>  、<code>Object.create</code>、 <code>new</code> 、 <code>class</code>。</p> <p>下面我们熟悉一下它们。</p> <h4 id="prototype"><a href="#prototype" class="header-anchor">#</a> prototype</h4> <blockquote><p>prototype 是所有JS函数都有的一个属性，我们可以用它在实例间共享属性和方法</p></blockquote> <h4 id="object-create"><a href="#object-create" class="header-anchor">#</a> Object.create</h4> <blockquote><p>定义：Object.create()方法创建一个新对象，使用现有的对象来提供新创建的对象的__proto__
语法：Object.create(proto，[propertiesObject]) —— MDN</p></blockquote> <p>简单说，<code>Object.create(proto)</code> 方法帮助我们创建了一个新对象，这个对象的 <code>__proto__</code> 属性指向 <code>proto</code>，然后返回这个对象。</p> <p><strong>我们来测试一下：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
obj <span class="token comment">// {}</span>
obj<span class="token punctuation">.</span>__proto__ <span class="token comment">// undefined</span>
obj<span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>由于 <code>Object.create</code> 会先创建一个对象，最后返回它，因此 <code>obj</code> 是一个空对象
而由于 <code>null</code> 没有任何方法，因此 <code>obj</code> 的 <code>__proto__</code> 上也没有任何方法，直接为 <code>undefined</code></p> <p><strong>再看正常情况下的：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>
obj <span class="token comment">// {}</span>
obj<span class="token punctuation">.</span>__proto__ <span class="token comment">// { a: 1 }</span>
obj<span class="token punctuation">.</span>a <span class="token comment">// 1</span>
obj<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Object <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>这个示例中，我们以 <code>o</code> 作为 <code>prototype</code> 原型，赋给了 <code>obj</code> 的 <code>__proto__</code> 。</p> <ul><li>因此 <code>obj</code> 依然还是 <code>{}</code></li> <li>但 <code>obj.__proto__</code> 上拥有了 <code>o</code> 的所有属性和方法</li> <li>执行 <code>obj.a</code> 时，首先会在 <code>obj</code> 对象本身查找，发现没有找到，因此会向 <code>obj.__proto__</code> 上查找，发现有这个属性，因此返回 1</li> <li><code>obj.constructor</code> 指向的是创建 <code>obj</code> 的构造函数，而在 <code>Object.create</code> 内部，创建 <code>obj</code> 时构造函数即为 <code>Object</code></li></ul> <p>下面我们模拟实现一个 <code>Object.create()</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function-variable function">myCreate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">proto</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 等同于 let obj = new Object()</span>
  obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> proto
  <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">myCreate</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>constructor <span class="token comment">// Object</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>从第一行代码 <code>let obj = {}</code> 中我们发现，创建 <code>obj</code> 的时候，构造函数是 <code>Object</code> ，因此创建出来的对象，其构造函数就是 <code>Object</code></p> <p><strong>上面的示例中，我们是用对象 <code>o</code> 作为原型参数，下面我们看看用 <code>o.__proto__</code> 会是什么效果：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span>
obj <span class="token comment">// {}</span>
obj<span class="token punctuation">.</span>__proto__ <span class="token comment">// Object.prototype</span>
obj<span class="token punctuation">.</span>a <span class="token comment">// undefined</span>
obj<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Object <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>这里，因为我们传入的原型参数是 <code>o.__proto__</code> ，其实也就是 <code>Object</code> 这个构造函数。</p> <p>它上面有很多方法，<code>obj</code> 都可以调用，但并没有 <code>a</code> 属性，因此 <code>obj.a</code> 返回了 <code>undefined</code></p> <p><strong>最后，我们看看 <code>Object.create</code> 的第二个参数 <code>propertiesObject</code></strong></p> <blockquote><p>Object.create(proto, propertiesObject)</p></blockquote> <p><code>propertiesObject</code> 允许我们添加额外的属性，但是需要遵循 <strong>属性描述符</strong> 的格式，和 <code>Object.defineProperty</code> 的<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperties" target="_blank" rel="noopener noreferrer">第二个参数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>一样：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">2</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
obj <span class="token comment">// { b: 2 }</span>
obj<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">3</span>
obj <span class="token comment">// { b: 2 } </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>上面的例子中，因为默认添加的 <code>b</code> 属性是 <strong>不可写</strong> ，<strong>不可枚举</strong>，<strong>不可配置</strong> 的，因此修改 b 的值无效。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token punctuation">{</span>

    <span class="token comment">// 数据描述符</span>
    <span class="token comment">// value: 2,</span>
    <span class="token comment">// writable: true, // 默认为 false</span>
    <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 默认为 false</span>
    <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 默认为 false</span>

    <span class="token comment">// 访问器描述符</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Setting `o.bar` to&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
obj <span class="token comment">// { b: 10 }</span>
obj<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">3</span>
obj <span class="token comment">// { b: 10 }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>同样的，这个例子中，由于 <code>obj.b</code> 调用的是 b 属性的 <code>访问器描述符</code> ，因此每次都会返回 <code>10</code> 。</p> <h4 id="new"><a href="#new" class="header-anchor">#</a> new</h4> <blockquote><p>定义：<code>new 运算符</code> 创建一个<strong>用户定义的对象类型</strong>的实例或<strong>具有构造函数的内置对象</strong>的实例。 - MDN
语法：<code>new constructor[([arguments])]</code></p></blockquote> <p>new 关键字是JS中的语法糖，它内部会进行如下几个操作：</p> <ol><li>创建一个空对象</li> <li>为这个空对象添加属性 <code>__proto__</code> ，并链接到构造函数的原型对象上</li> <li>执行这个构造函数，并指定步骤1中创建的对象作为 <code>this</code> 的上下文</li> <li>如果构造函数没有返回对象，则返回 <code>this</code>，如果有返回对象，则返回这个对象</li></ol> <p><strong>自己实现一个new</strong>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">myNew</span><span class="token punctuation">(</span><span class="token parameter">ctor<span class="token punctuation">,</span> <span class="token operator">...</span>arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>ctor<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
  <span class="token comment">// var obj = {}</span>
  <span class="token comment">// obj.__proto__ = ctor.prototype</span>
  <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token function">ctor</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token operator">...</span>arg<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> res <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> res <span class="token operator">:</span> obj
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>通过以上4个步骤，我们就可以用 new 创建对象的实例了。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name   
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Aaron'</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="class"><a href="#class" class="header-anchor">#</a> class</h4> <blockquote><p><strong>class 声明</strong>创建一个基于原型继承的具有给定名称的新类。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token punctuation">}</span>
  <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Aaron'</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>其实 class 声明是ES6添加的一个语法糖，可以通过这个 <a href="https://babeljs.io/repl/#?browsers=&amp;build=&amp;builtIns=false&amp;corejs=3.6&amp;spec=false&amp;loose=false&amp;code_lz=MYGwhgzhAEAKCmAnCB7AdtA3gKGtY6EALogK7BEqIAUaYAtvADTRgDm8AlFrntEQAsAlhAB0dRtAC80CfF55BI0e3jTWHXgF9eEMAE8AEvBAgU1bjjw6tQA&amp;debug=false&amp;forceAllTransforms=false&amp;shippedProposals=false&amp;circleciRepo=&amp;evaluate=true&amp;fileSize=false&amp;timeTravel=false&amp;sourceType=module&amp;lineWrap=false&amp;presets=es2015%2Creact%2Cstage-2&amp;prettier=false&amp;targets=&amp;version=7.15.8&amp;externalPlugins=&amp;assumptions=%7B%7D" target="_blank" rel="noopener noreferrer">babel在线工具<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 查看ES5的实现</p> <h2 id="二、原型链"><a href="#二、原型链" class="header-anchor">#</a> 二、原型链</h2> <p>通过上面的案例，我们了解到原型可以帮助我们在不同的实例间共享属性和方法，实现的过程中，会涉及这么几个概念：</p> <ul><li><code>prototype</code> 是构造函数上的属性，用来在不同的实例间共享属性和方法</li> <li><code>__proto__</code> 是对象上的属性，指向这个对象的原型</li> <li><code>constructor</code> 是对象的构造函数，指向创建这个对象的构造函数</li> <li><code>instanceof</code> 是判断一个对象是否为这个构造函数的实例</li></ul> <p>他们之间的关系如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>
obj<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Object <span class="token comment">// true</span>
obj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>下面我们看一个实例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">play</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> play</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Aaron'</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span>
person<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Aaron play</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>其中：</p> <ul><li>构造函数 <code>Person</code></li> <li>实例 <code>person</code></li> <li>原型实例 <code>Person.prototype</code></li> <li>实例的原型属性 <code>person.__proto__</code></li> <li>原型实例的构造函数 <code>Person.prototype.constructor</code></li> <li>原型的原型属性 <code>Person.prototype.__proto__</code></li></ul> <p>它们之间的关系如下图：</p> <p><img src="https://oss-1252175178.cos.ap-shanghai.myqcloud.com/JS%E5%8E%9F%E5%9E%8B%E9%93%BE.png" alt=""></p> <p>下面我们用代码来表示：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>person<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Person <span class="token comment">// true</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Object <span class="token comment">// true</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>至此，我们就将整个原型链的关系展现出来了。</p> <h2 id="三、继承的实现方式"><a href="#三、继承的实现方式" class="header-anchor">#</a> 三、继承的实现方式</h2> <h3 id="es5继承"><a href="#es5继承" class="header-anchor">#</a> ES5继承</h3> <p>JS继承的实现一直是个麻烦事儿，我们先用 ES5 来实现以下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> energy</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>energy <span class="token operator">=</span> energy
<span class="token punctuation">}</span>

<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is eating </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>num<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sleep</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is sleeping...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">play</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is playing...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// let leo = new Animal('leo', 10)</span>

<span class="token keyword">function</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> energy<span class="token punctuation">,</span> breed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> energy<span class="token punctuation">)</span> <span class="token comment">// 1、继承属性</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>breed <span class="token operator">=</span> breed<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">// 2、继承方法（但这里会引起 constructor 异常）</span>

<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">bark</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 3、在子类的原型上添加方法</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>energy <span class="token operator">-=</span> <span class="token number">.1</span>
<span class="token punctuation">}</span>

<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Dog <span class="token comment">// 4、修复 constructor 异常</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="es6继承"><a href="#es6继承" class="header-anchor">#</a> ES6继承</h3> <p>现在我们用 ES6 的语法来实现继承：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> energy</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>energy <span class="token operator">=</span> energy
  <span class="token punctuation">}</span>

  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is eating </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>num<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is sleeping...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is playing...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> energy<span class="token punctuation">,</span> breed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> energy<span class="token punctuation">)</span> <span class="token comment">// 等同于调用了 Animal 的 constructor</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>breed <span class="token operator">=</span> breed
  <span class="token punctuation">}</span>
  <span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>energy <span class="token operator">-=</span> <span class="token number">.1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>可以看到 ES6 的实现精简了许多，也和其他面相对象编程语言如 Java 、C++的语法更接近了</p> <p><strong>Function Array 和 Object是什么关系？</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面的结果说明： <strong>Function 和 Array 都继承自 Object，它们创建的实例都有 Object 原型方法</strong></p> <p><strong>原型链的最初是什么状态？</strong></p> <p><code>null =&gt; Object =&gt; Array/Function</code></p> <h2 id="四、object对象上的属性和方法"><a href="#四、object对象上的属性和方法" class="header-anchor">#</a> 四、Object对象上的属性和方法</h2> <h3 id="_1、创建相关"><a href="#_1、创建相关" class="header-anchor">#</a> 1、创建相关</h3> <ul><li><strong><code>Object.create(proto，[propertiesObject])</code></strong> 方法创建一个新对象，使用现有的对象来提供新创建的对象的__proto__</li> <li><strong><code>Object.assign(target, ...sources)</code></strong> 方法用于将所有可枚举属性的值从一个或多个源对象分配到目标对象。它将返回目标对象。</li></ul> <h3 id="_2、属性相关"><a href="#_2、属性相关" class="header-anchor">#</a> 2、属性相关</h3> <ul><li><p><strong><code>Object.defineProperties(obj, props)</code></strong> 方法直接在一个对象上定义新的属性或修改现有属性，并返回该对象。</p></li> <li><p><code>Object.getOwnPropertyNames(obj)</code> 方法返回一个由指定对象的所有自身属性的属性名（<strong>包括不可枚举属性但不包括Symbol值作为名称的属性</strong>）组成的数组。</p></li> <li><p><code>Object.getOwnPropertyDescriptors(obj)</code> 方法用来获取一个对象的所有自身属性的描述符。</p></li> <li><p><code>Object.getOwnPropertySymbols(obj)</code> 方法返回一个给定对象自身的所有 Symbol 属性的数组。</p></li> <li><p><code>Object.seal(obj)</code> 方法封闭一个对象，阻止添加新属性并将所有现有属性标记为不可配置。当前属性的值只要原来是可写的就可以改变。</p></li> <li><p><code>Object.isSealed(obj)</code> 方法判断一个对象是否被密封。</p></li> <li><p><code>Object.preventExtensions(obj)</code> 方法让一个对象变的不可扩展，也就是永远不能再添加新的属性。</p></li> <li><p><code>Object.isExtensible(obj)</code> 方法判断一个对象是否是可扩展的（是否可以在它上面添加新的属性）。</p></li> <li><p><code>Object.freeze()</code> 方法可以冻结一个对象。一个被冻结的对象再也不能被修改；</p></li> <li><p><code>Object.isFrozen(obj)</code> 方法判断一个对象是否被冻结。</p></li> <li><p><strong><code>Object.keys(obj)</code></strong> 方法会返回一个由一个给定对象的自身可枚举属性组成的数组，数组中属性名的排列顺序和正常循环遍历该对象时返回的顺序一致 。</p></li> <li><p><strong><code>obj.hasOwnProperty(prop)</code></strong> 方法会返回一个布尔值，指示对象自身属性中是否具有指定的属性（也就是，是否有指定的键）。</p></li> <li><p><code>Object.entries(obj)</code> 方法返回一个给定对象自身可枚举属性的键值对数组，其排列与使用 for...in 循环遍历该对象时返回的顺序一致（区别在于 for-in 循环还会枚举原型链中的属性）。</p></li> <li><p><code>Object.fromEntries(iterable)</code> 方法把键值对列表转换为一个对象。</p></li> <li><p><code>Object.values(obj)</code> 方法返回一个给定对象自身的所有可枚举属性值的数组，值的顺序与使用for...in循环的顺序相同 ( 区别在于 for-in 循环枚举原型链中的属性 )。</p></li></ul> <h3 id="_3、原型相关"><a href="#_3、原型相关" class="header-anchor">#</a> 3、原型相关</h3> <ul><li><p><code>Object.setPrototypeOf()</code> 方法设置一个指定的对象的原型 ( 即, 内部[[Prototype]]属性）到另一个对象或  null。<strong>性能原因建议使用 Object.create 替代</strong></p></li> <li><p><code>Object.getPrototypeOf(obj)</code> 方法返回指定对象的原型（内部[[Prototype]]属性的值）。</p></li> <li><p><code>prototypeObj.isPrototypeOf(object)</code> 方法用于测试一个对象是否存在于另一个对象的原型链上。</p></li></ul> <h3 id="_4、其他"><a href="#_4、其他" class="header-anchor">#</a> 4、其他</h3> <ul><li><code>Object.is(value1, value2)</code> 方法判断两个值是否为同一个值。</li> <li><strong><code>obj.toString()</code></strong> 方法返回一个表示该对象的字符串。</li> <li><strong><code>obj.valueOf()</code></strong> 方法返回指定对象的原始值。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="五、javascript是如何设计对象的"><a href="#五、javascript是如何设计对象的" class="header-anchor">#</a> 五、JavaScript是如何设计对象的？</h2> <p>我们知道对象的三要素有：</p> <ul><li>唯一性：即使完全相同的两个对象，也并非同一个对象</li> <li>状态：对象的状态，同一对象可能处于不同的状态之下</li> <li>行为：可能因为行为产生状态变迁</li></ul> <p>而JavaScript设计对象时，将对象设计成为了：<strong>具有高度动态性的属性集合</strong>。具体表现在：</p> <ol><li>将状态和行为抽象成了属性</li> <li>支持动态添加状态和行为</li></ol> <p>为了支持上述的设计，JavaScript的属性被设计成两类：<strong>数据属性</strong> 和 <strong>访问器属性</strong>，而且通过一组特征来描述属性：</p> <ul><li><strong>数据属性</strong>，接近其他语言的属性概念，通常我们定义的都是数据属性
<ul><li>value：属性的值</li> <li>writable：决定属性能否被赋值</li> <li>enumerable：决定 for in 能否枚举该属性</li> <li>configurable：决定该属性能否被删除或者改变特征值</li></ul></li> <li><strong>访问器属性</strong>，可以通过 Object.defineProperty 来定义
<ul><li>getter：函数或 undefined，在取属性值时被调用</li> <li>setter：函数或 undefined，在设置属性值时被调用</li> <li>enumerable：决定 for in 能否枚举该属性</li> <li>configurable：决定该属性能否被删除或者改变特征值
用 Object.getOwnPropertyDescriptor 来查看属性的特征</li></ul></li></ul> <p><strong>综上，实际上 JavaScript 对象的运行时是一个“属性的集合”，属性以字符串或者 Symbol 为 key，以数据属性特征值或者访问器属性特征值为 value。</strong></p> <h2 id="六、javascript是如何实现面向对象的"><a href="#六、javascript是如何实现面向对象的" class="header-anchor">#</a> 六、JavaScript是如何实现面向对象的？</h2> <blockquote><p>JavaScript是基于原型的面向对象语言</p></blockquote> <p>JavaScript是基于 <strong>原型编程范式</strong> 来实现面向对象的。原型编程范式的核心思想就是<strong>利用实例来描述对象，用实例作为定义对象和继承的基础</strong>。</p> <p>在 JavaScript 中，原型编程范式的体现就是基于原型链的继承。这其中，对原型、原型链的理解是关键。</p> <h3 id="_1、基于原型vs基于类"><a href="#_1、基于原型vs基于类" class="header-anchor">#</a> 1、基于原型vs基于类</h3> <ul><li>JavaScript 使用了基于原型的方式实现面向对象，而不是基于类的方式。</li> <li>由于公司政治原因，JavaScript 推出之时，管理层就要求它去模仿 Java，Brendan Eich在原型基础上引入了new、this等语言特性，使之语法看起来更像Java。</li> <li>基于原型和基于类都能够满足基本的复用和抽象需求，它们的区别在于：基于原型强调行为，基于类则强调分类。猫-&gt;老虎（大猫），猫-&gt;老虎（猫科动物）</li></ul> <h3 id="_2、原型系统"><a href="#_2、原型系统" class="header-anchor">#</a> 2、原型系统</h3> <p>抛开Java类的复杂语法设施(new、Function Object、函数的prototype属性等)，<strong>其实原型系统相当简单</strong>:</p> <ul><li><strong>对象的原型上都有私有字段<code>[[prototype]]</code></strong></li> <li><strong>对象上读取一个属性，如果当前对象本身没有，则会继续访问对象的原型，直到找到或原型为空为止</strong></li></ul> <p>早前，程序员只能通过Java风格的类接口来操纵原型运行时，ES6则提供内置函数来操纵原型：</p> <ul><li><code>Object.create</code> 根据指定的原型创建新对象，原型可以是null</li> <li><code>Object.getPrototypeOf</code> 获得一个对象的原型</li> <li><code>Object.setPrototypeOf</code> 设置一个对象的原型</li></ul> <h3 id="_3、javascript中的类"><a href="#_3、javascript中的类" class="header-anchor">#</a> 3、JavaScript中的类</h3> <ul><li><p>ES3以前很弱，仅仅是运行时的一个私有字符串属性<code>[[class]]</code>，通过<code>Object.prototype.toString</code> 获取</p></li> <li><p>ES5开始，<code>[[class]]</code> 被 <code>Symbol.toStringTag</code> 代替，<code>Object.prototype.toString</code> 的意义从命名上不再跟 class 相关</p></li> <li><p><code>new</code> 可以理解为JavaScript面向对象的一部分，new运算接收一个构造器和一组调用函数，实际上做了几件事：</p> <ol><li>以构造器的 prototype 属性为原型，创建新对象；</li> <li>将 this 和调用参数传给构造器，执行；</li> <li>如果构造器返回的是对象，则返回，否则返回第一步创建的对象。</li></ol></li> <li><p>ES6加入了新特性 <code>class</code> ，<code>new</code> 跟 <code>function</code> 搭配的怪异行为终于可以退休了（虽然运行时没有变），在任何场景，都推荐使用ES6的语法来定义类，而令<code>function</code> 回归原本的函数语义。</p></li></ul> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>首先，我们通过实现一个 Person 类，了解到：</p> <ul><li>prototype 原型是如何在实例间共享方法的</li> <li>Object.create(prototype) 的效果是创建一个对象，然后将其 <code>__proto__</code> 属性代理到 <code>prototype</code> 上，这样这个对象就可以调用 prototype 上的方法了</li> <li>new 关键字可以简化我们的构造函数，比如 <code>new Object()</code> 它主要做了如下几件事：
<ol><li>创建一个空对象 obj</li> <li>设置这个对象的 <code>__proto__</code> 为构造函数 <code>Object.prototype</code></li> <li>执行这个构造函数，并以 obj 作为this上下文</li> <li>第三步返回的若是一个对象，则返回这个对象，否则返回 obj</li></ol></li></ul> <p>然后，我们分别对介绍了 <code>prototype</code> <code>Object.create(proto, propertiesObject)</code> <code>new</code> <code>class</code> 的使用</p> <p>接着，我们比较了几种创建对象的方式：<code>{}</code> <code>Object.create({})</code> <code>new Object()</code></p> <p>再后来，对 Object 对象上的方法进行了详细的介绍，并分类列出了创建相关的、属性相关、原型相关的方法</p> <p>最后，我们使用 ES5 和 ES6 的语法分别实现继承，并引出原型链。</p> <p><strong>练习1：分别用ES5/ES6实现类、ES5/ES6实现继承、并用代码模拟原型链的查找过程</strong></p> <p><strong>练习2：手写new、手写instanceof</strong></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">1/20/2022, 1:26:42 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/article/前端基础/JS进阶/JS类型.html" class="prev">
        JS类型
      </a></span> <span class="next"><a href="/article/前端基础/JS进阶/JS执行机制.html">
        JS执行机制
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.a2d0ac2d.js" defer></script><script src="/assets/js/2.6d2266aa.js" defer></script><script src="/assets/js/60.b40b1d39.js" defer></script>
  </body>
</html>
